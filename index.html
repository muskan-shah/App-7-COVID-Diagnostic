<!DOCTYPE html> 
<html> 
<!-- The following code has been developed by students and/or researchers of the Freshman Research Initiative DIY Diagnostics Stream at The University of Texas at Austin.  This code is shared for demonstration purposes and should not be considered a product -- it is for entertainment purposes only.  Any user of this code does so at their own risk. Members of the DIY Stream, FRI, and The University of Texas system are not liable for anything related to this code.
 
THIS CODE SHOULD NOT BE USED TO DIAGNOSE ANY KIND OF MEDICAL CONDITION.
 
  
Authors in chronological order of contribution:
Tim Riedel
Muskan Shah 

Further Information: 
http://diystream.cns.utexas.edu/
 
Research Educator:
Timothy Riedel
triedel@utexas.edu
 
Brief Description of Goal of Code:
The goal of this code is create my own survey to "diagnose" patients with COVID-19 vs. other sicknesses (eg., cold, flu, seasonal allergies). Another goal is to display these results with some sort of visual using the canvas.
 
Known Issues:
The coding of this app is very similar to that of app 4. This app went fairly smoothly, including adding the image. However, I was unable to get the results to display in a pie chart or bar graph in the canvas like I had intended for it to. So I had to document that I failed and went ahead and changed the results back to the way they were being displayed before. This is definitely not how I wanted them to be shown, as it is boring and not visually appealing at all. I mentioned this at the bottom, but I think 4 doughnut charts with the percenttages of each illness inside the chart would be an effective way to display the results visually (but I cannot figure out how to code that). 
I also noticed my header for the results page disappears when the percentages appear. I tried testing several different solutions (creating a new page, getting rid of the show results button and having the app go directly to the results instead, etc.), but I was unable to figure out a solution that worked. 
-->

   <head> 
     <!-- The title has to go in the "head" section of the code.-->
      <title>Covid-19 Diagnostic</title>  
	   <!-- The rest of the code in this portion is for style purposes. -->
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta name="apple-mobile-web-app-capable" content="yes">
      <link rel="stylesheet" href="w3.css">
      <link rel="stylesheet" href="w3-colors-flat.css">
	   <!-- Header portion was closed with the following tag. -->
   </head>   
    
   
<script>
        var covid_count = 0;
        var cold_count = 0;
	var flu_count = 0;
	var allergies_count = 0;
	//I created four variables similar to the ones from app four, which was the sprain vs fracture app.
		
        function covidAdd(){
            covid_count = covid_count + 1;
        }
	
        function coldAdd(){
            cold_count = cold_count + 1;
        }

        function fluAdd(){
            flu_count = flu_count + 1;
        }
	
        function allergiesAdd(){
            allergies_count = allergies_count + 1;
        }
	
	//To make sure a count is added to the proper corresponding option each time it is chosen, I created the functions above. 
	//The functions add one count to the total each time it is chosen.
	//I chose to compare all 4 illnesses because that would give the person taking the survey a better idea of their diagnosis.
	

  </script>



<style>
	<!--This is the "style" section of the code that allows me to change the format and design of the app to make it visually appealing.-->
.body {
     margin: 0em;
}
.page {
    width: 100vw;
    height: 100vh;
    position: fixed;
    top: 0;
    left: -100vw;
    overflow-y: auto;
    z-index: 0;
    background-color: hsl(0,0%,100%);
}
  .page:target {
    left: 0vw;
    z-index: 1;
}
   img, object {
      max-height:90%;
      max-width:90%;
}

	<!-- I didn't actually change anything within this section except adding the code for resizing of the image because it was already given in the base/skeleton code (just like it was in app 4). -->
</style>
	
<body>
	<!-- This starts the "body" section of the app and is where I inserted the header text. -->
<div id="header" class="w3-container w3-flat-belize-hole">
	<!-- Below is the header -->
	<h1> Corona Catcher </h1>
</div>
	<!-- "Div" tags are used to divide the body of the code into individual pages.  -->
<div id="content" class="w3-container">
	<!-- The "p" tags below are where the text go. -->
	<p>Are you feeling symptoms of a cold or allergies, but are scared it may be something worse like COVID-19? Take this short quiz to get a better idea of what diagnosis your symptoms indicate!</p>
	<!-- The "href" tags are essential to keep track of your pages. -->
	<a href="#one" class="w3-btn w3-flat-belize-hole w3-round"> Get Started </a>
	
	<p>The following code has been developed by students and/or researchers of the Freshman Research Initiative DIY Diagnostics Stream at The University of Texas at 		Austin.  This code is shared for demonstration purposes and should not be considered a product -- it is for entertainment purposes only. Any user of this code 			does so at their own risk. Members of the DIY Stream, FRI, and The University of Texas system are not liable for anything related to this code.</p>
 	
	<p>THIS CODE SHOULD NOT BE USED TO DIAGNOSE ANY KIND OF MEDICAL CONDITION.</p>
	
	<!--Below I inserted the code for my image. I chose this image because it shows people being sick, without being specific to one kind of disease (don't know what they're sick with). -->
	<img src="https://www.sheknows.com/wp-content/uploads/2020/02/how-to-stay-healthy-when-everyone-in-the-house-sick.png?resize=1280,720" alt="Sick People" width="500" height="250">
	
<div class="page" id="one">
	<!-- This is the first page to the quiz. -->
	<div id="header" class="w3-container w3-flat-belize-hole">
		<h1>Question 1</h1>
	</div>
	<!-- I inserted the first question in between the p's -->
     	<div id="content" class="w3-container">
     	<p>Do you have a dry cough?</p>    
     	</div>
	<!-- Here I added the two buttons and their java script in the middle -->
        <a href="#two" onclick="covidAdd();coldAdd();fluAdd();" class="w3-btn w3-flat-belize-hole w3-round"> Yes </a>
<!-- Each "href" tag states the page number that the app needs to be directed to. -->
        <a href="#two" onclick="allergiesAdd();" class="w3-btn w3-flat-belize-hole w3-round"> No </a>
<!-- Dry cough is only NOT a symptom for allergies, so the rest of the illnesses adds counts for the "Yes" button, while allergies adds a count for the "No" button.-->

</div>
<div class="page" id="two">
<!-- This section of the code shows what will be on page two. -->
	<div class="w3-container w3-flat-belize-hole">
		<h1>Question 2</h1>
	</div>
	
	<div id="content" class="w3-container">
		<p>Are you experiencing shortness of breath?</p>
	</div>
        <a href="#three" onclick="covidAdd();" class="w3-btn w3-flat-belize-hole w3-round"> Yes </a>
<!-- Each "href" tag states the page number that the app needs to be directed to. -->
        <a href="#three" onclick="allergiesAdd();coldAdd();fluAdd();" class="w3-btn w3-flat-belize-hole w3-round"> No </a>
<!-- For shortness of breath, corona is the only illness that has it as a symptom, so it is the only variable that will be counted for if the patient answers yes.  -->
 
</div>	
<!-- Separates page 2 & 3 -->
<div class="page" id="three">
	<div class="w3-container w3-flat-belize-hole">
		<h1>Question 3</h1>
	</div>
	
	<div id="content" class="w3-container">
		<p>Are you sneezing regularly?</p>
		
	</div>
<!-- Each "href" tag states the page number that the app needs to be directed to. -->
        <a href="#four" onclick="allergiesAdd();coldAdd()" class="w3-btn w3-flat-belize-hole w3-round"> Yes </a>
	<a href="#four" onclick="covidAdd();fluAdd();" class="w3-btn w3-flat-belize-hole w3-round"> No </a>
<!-- Sneezing is a symptom of allergies and cold, so it adds a count to those illnesses when someone clicks "Yes."-->
	
</div>	
<!-- Separates page 3 & 4 -->
<div class="page" id="four">
	<div class="w3-container w3-flat-belize-hole">
		<h1>Question 4</h1>
	</div>
	
	<div id="content" class="w3-container">
		<p>Do you have a runny or stuffy nose?</p>
	</div>
        <a href="#five" onclick="coldAdd();allergiesAdd();" class="w3-btn w3-flat-belize-hole w3-round"> Usually </a>
<!-- Each "href" tag states the page number that the app needs to be directed to. -->
	<a href="#five" onclick="fluAdd();" class="w3-btn w3-flat-belize-hole w3-round"> Sometimes </a>
        <a href="#five" onclick="covidAdd();" class="w3-btn w3-flat-belize-hole w3-round"> Never </a>
<!-- According to the chart, it is common to have a runny or stuffy nose with a cold or allergies, 
so I put those with "Yes." It sometimes occurs with the flu, so I put that as "Sometimes." It rarely occurs with 
covid, so I put that with "No" to keep things simple.-->

</div>	
<!-- Separates page 4 & 5 -->
<div class="page" id="five">
	<div class="w3-container w3-flat-belize-hole">
		<h1>Question 5</h1>
	</div>
	
	<div id="content" class="w3-container">
		<p>Do you have a sore throat?</p>
	</div>
        <a href="#six" onclick="covidAdd();coldAdd();fluAdd();" class="w3-btn w3-flat-belize-hole w3-round"> Yes </a>
<!-- Each "href" tag states the page number that the app needs to be directed to. -->
        <a href="#six" onclick="allergiesAdd();" class="w3-btn w3-flat-belize-hole w3-round"> No </a>
<!-- I decided to put covid, cold, and flu as "Yes" for sore throat as a symptom because they were considered 
"sometimes" on the chart. I have rarely heard of sore throat as a symptom of allergies, so I put that as a "No." -->   

</div>
<!-- Separates page 5 & 6 -->
<div class="page" id="six">
	<div class="w3-container w3-flat-belize-hole">
		<h1>Question 6</h1>
	</div>
	
	<div id="content" class="w3-container">
		<p>Have you been experiencing frequent fevers for consecutive days?</p>
	</div>
        <a href="#seven" onclick="covidAdd();fluAdd();" class="w3-btn w3-flat-belize-hole w3-round"> Yes </a>
<!-- Each "href" tag states the page number that the app needs to be directed to. -->
        <a href="#seven" onclick="coldAdd();allergiesAdd();" class="w3-btn w3-flat-belize-hole w3-round"> No </a>
<!-- I put covid and flu as "Yes" for fevers and cold and allergies as "No." 
I chose to not put a "sometimes" option because that can be very vague and may distort the results, 
so I stuck with keeping fevers as a yes in covid and the flu (in which they are more common).-->		 

</div>
<!-- Separates page 6 & 7 -->
<div class="page" id="seven">
	<div class="w3-container w3-flat-belize-hole">
		<h1>Question 7</h1>
	</div>
	
	<div id="content" class="w3-container">
		<p>Are you feeling fatigue (tiredness or weakness)?</p>
	</div>
        <a href="#eight" onclick="covidAdd();fluAdd();coldAdd();" class="w3-btn w3-flat-belize-hole w3-round"> Yes </a>
<!-- Each "href" tag states the page number that the app needs to be directed to. -->
        <a href="#eight" onclick="allergiesAdd();" class="w3-btn w3-flat-belize-hole w3-round"> No </a>
<!-- Fatigue is more common with covid, flu, and cold than it is for allergies, so I put the first three as "Yes" 
and allergies as "No."-->		 

</div>
<!-- Separates page 7 & 8 -->
<div class="page" id="eight">
	<div class="w3-container w3-flat-belize-hole">
		<h1>Question 8</h1>
	</div>
	
	<div id="content" class="w3-container">
		<p>Have you been getting headaches?</p>
	</div>
        <a href="#nine" onclick="covidAdd();fluAdd();allergiesAdd();" class="w3-btn w3-flat-belize-hole w3-round"> Yes </a>
<!-- Each "href" tag states the page number that the app needs to be directed to. -->
        <a href="#nine" onclick="coldAdd();" class="w3-btn w3-flat-belize-hole w3-round"> No </a>
<!-- Headaches are mostly common with the flu, but also sometimes with allergies and covid, so I put those all as "Yes." 
It is rare with colds, so I put cold as "No."-->		 

</div>
<!-- Separates page 8 & 9 -->
<div class="page" id="nine">
	<div class="w3-container w3-flat-belize-hole">
		<h1>Question 9</h1>
	</div>
	
	<div id="content" class="w3-container">
		<p>Have you been experiencing body aches and pains?</p>
	</div>
        <a href="#ten" onclick="covidAdd();fluAdd();coldAdd();" class="w3-btn w3-flat-belize-hole w3-round"> Yes </a>
<!-- Each "href" tag states the page number that the app needs to be directed to. -->
        <a href="#ten" onclick="allergiesAdd();" class="w3-btn w3-flat-belize-hole w3-round"> No </a>
<!-- Body aches occur commonly with the flu and cold, but also sometimes with covid, so those are all "Yes." 
It it not a symptom of allergies, so I put that as "No."-->

</div>
<!-- Separates page 9 & 10 -->
<div class="page" id="ten">
	<div class="w3-container w3-flat-belize-hole">
		<h1>Question 10</h1>
	</div>
	
	<div id="content" class="w3-container">
		<p>Have you been experiencing diarrhea?</p>
	</div>
        <a href="#eleven" onclick="covidAdd();" class="w3-btn w3-flat-belize-hole w3-round"> Yes </a>
<!-- Each "href" tag states the page number that the app needs to be directed to. -->
        <a href="#eleven" onclick="coldAdd();fluAdd();allergiesAdd();" class="w3-btn w3-flat-belize-hole w3-round"> No </a>
<!-- Diarrhea is only really a symptom of covid, so I only put "Yes" for that.-->

</div>
<!-- Separates page 10 & 11 -->
<div class="page" id="eleven">
	<div class="w3-container w3-flat-belize-hole">
		<h1>Question 11</h1>
	</div>
	
	<div id="content" class="w3-container">
		<p>How quickly and long have you been experiencing your symptoms?</p>
	</div>
        <a href="#results" onclick="coldAdd();" class="w3-btn w3-flat-belize-hole w3-round"> Gradual onset; less than 2 weeks </a>
<!-- Each "href" tag states the page number that the app needs to be directed to. -->
        <a href="#results" onclick="fluAdd()" class="w3-btn w3-flat-belize-hole w3-round"> Abrupt onset; 1-2 weeks </a>
        <a href="#results" onclick="allergiesAdd();" class="w3-btn w3-flat-belize-hole w3-round"> Abrupt onset; several weeks </a>
        <a href="#results" onclick="covidAdd();" class="w3-btn w3-flat-belize-hole w3-round"> Abrupt onset; 7-25 days </a>
<!-- I assigned these last four based on the top of the chart that described the length and onset of symptoms. 
They all vary quite a bit, so I made a different option for each of them.-->

</div>	
<!-- Separates page 11 & 12 (results) -->
<div class="page" id="results">
<!-- The code below is for the "results" page that displays the results from the questionnaire. -->
	<div id="header" class="w3-container w3-flat-belize-hole">
		<h1>Results</h1>
	</div>
	<canvas id="a" width = "300" height = "225" style = "border:1px solid #000000;"> 
		</canvas>
	<!-- I added the canvas to the results, however I was unsuccesful in trying to get results to show up on the canvas. I had originally wanted a pie chart or bar graph to show up. I knew some of the other Makerspace girls had tried to create a pie chart, so I tried to find code to create a bar graph. Unfortunately, the code I found didn't work and I was unable to get anything to display on my canvas. (This code can be seen because I committed the changes.) I tried following the code to find where the disconnect was between the canvas and displaying the results, but I couldn't really understand it as it was more advanced than what I know/have worked with. I decided to go back to the way the results were displayed in App 4 (as percentages) so at least I could get my results to show up in some form. --> 
	<!-- I think an interesting way to display results would be to use four doughnut charts for each illness with the percentage of that illness (rounded to the nearest whole number) inside the hole. An example of this type of chart can be found in my ELN. That is very visually appealing and interesting to understand. I can't figure how to code that and the code libraries I've tried haven't worked, so I am reverting back to the old way to display results. -->
	<script>
		function showResults(){
           		var resultText = document.getElementById("results");
	   		var total = covid_count + cold_count + flu_count + allergies_count;
			var covidPercent = (((covid_count)/(total))*100);
			var coldPercent = (((cold_count)/(total))*100);
			var fluPercent = (((flu_count)/(total))*100);
			var allergiesPercent = (((allergies_count)/(total))*100);
			resultText.innerHTML = "Probability that you have COVID-19 =" + covidPercent + "Probability that you have a cold =" + coldPercent + "Probability that you have the flu =" + fluPercent + "Probability that you have seasonal allergies =" + allergiesPercent;

		}
		// The results portion of my code from App 4 functioned properly, so I simply used that same code in this questionnaire, modifying the variables and functions to match survey for app 7. 
	</script>
		<a href="#results" onclick="showResults();" class="w3-btn w3-flat-belize-hole"> Show Results </a>
		<!--This button here is what the survey takers click to be directed to their results. When this is clicked, the showResults function is activated, producing the percantages of each illness as a results page. -->
	<!-- var myCanvas = document.getElementById("myCanvas");
		myCanvas.width = 300;
		myCanvas.height = 300;
  	var ctx = myCanvas.getContext("2d");

	function drawLine(ctx, startX, startY, endX, endY,color){
   		ctx.save();
    		ctx.strokeStyle = color;
   		ctx.beginPath();
    		ctx.moveTo(startX,startY);
   		ctx.lineTo(endX,endY);
  		ctx.stroke();
 		ctx.restore();
	}
	function drawBar(ctx, upperLeftCornerX, upperLeftCornerY, width, height,color){
	    	ctx.save();
    		ctx.fillStyle=color;
    		ctx.fillRect(upperLeftCornerX,upperLeftCornerY,width,height);
   		ctx.restore();
	}
	var illnesses = {
		"COVID-19": var covidPercent,
  		"Cold": var coldPercent,
		"Flu": var fluPercent,
		"Seasonal Allergies": var allergiesPercent
	};
var Barchart = function(options){
    this.options = options;
    this.canvas = options.canvas;
    this.ctx = this.canvas.getContext("2d");
    this.colors = options.colors;
  
    this.draw = function(){
        var maxValue = 0;
        for (var categ in this.options.data){
            maxValue = Math.max(maxValue,this.options.data[categ]);
        }
        var canvasActualHeight = this.canvas.height - this.options.padding * 2;
        var canvasActualWidth = this.canvas.width - this.options.padding * 2;
 
        //drawing the grid lines
        var gridValue = 0;
        while (gridValue <= maxValue){
            var gridY = canvasActualHeight * (1 - gridValue/maxValue) + this.options.padding;
            drawLine(
                this.ctx,
                0,
                gridY,
                this.canvas.width,
                gridY,
                this.options.gridColor
            );
             
            //writing grid markers
            this.ctx.save();
            this.ctx.fillStyle = this.options.gridColor;
            this.ctx.font = "bold 10px Arial";
            this.ctx.fillText(gridValue, 10,gridY - 2);
            this.ctx.restore();
 
            gridValue+=this.options.gridScale;
        }
  
        //drawing the bars
        var barIndex = 0;
        var numberOfBars = Object.keys(this.options.data).length;
        var barSize = (canvasActualWidth)/numberOfBars;
 
        for (categ in this.options.data){
            var val = this.options.data[categ];
            var barHeight = Math.round( canvasActualHeight * val/maxValue) ;
            drawBar(
                this.ctx,
                this.options.padding + barIndex * barSize,
                this.canvas.height - barHeight - this.options.padding,
                barSize,
                barHeight,
                this.colors[barIndex%this.colors.length]
            );
 
            barIndex++;
        }
  
    }
}
	var myBarchart = new Barchart(
    		{
       	 canvas:myCanvas,
       	 padding:10,
       	 gridScale:5,
       	 gridColor:"#eeeeee",
       	 data:myVinyls,
         colors:["#a55ca5","#67b6c7", "#bccd7a","#eb9743"]
   		 }
	);
	myBarchart.draw(); -->
	<!-- This was the code I inserted to try to get the bar graph to show up. I think it did not work because I changed the integers of teh four bars to variables, and this was not the proper code to make that function. I'm not sure how to get it to work with variables rather than integers, but I am displaying my attempt here. -->
	
</div>	
<!-- Below is the footer, which was left unmodified from the forked code. -->
<footer class="w3-bottom w3-container w3-flat-belize-hole">
	<p>DIY!</p>
</footer> 
 
</body>
	<!-- The "body" tag above closes the body section of the app. -->
</html>  
<!-- The "html" tag above closes the HTML section of the entire app (so the entirety of the app). -->
 
	   
 
